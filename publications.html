<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Publications - Data AI Lab @ KAIST</title>
    <meta property="og:title" content="Publications - Data AI Lab, KAIST" />
    <meta property="og:description" content="Explore the latest research publications from the Data AI Lab at KAIST." />
    <meta property="og:image" content="images/preview.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <link rel="icon" href="images/favicon.ico" type="image/x-icon" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body class="bg-gray-50 text-gray-800">
    <script src="include-header-footer.js"></script>

    <!-- Hero Section -->
    <section class="relative flex hero-bg">
      <div class="w-full">
        <div id="site-header"></div>
        <div class="container mx-auto px-6 py-6 sm:py-12 text-white text-3xl sm:text-4xl font-bold">
          Publications
        </div>
      </div>
    </section>

    <main class="container mx-auto px-6 pb-16">
      <div id="pub-list" class="space-y-3"></div>
    </main>

    <div id="site-footer"></div>

    <script>
      fetch("data/publications.json")
        .then((res) => res.json())
        .then((data) => {
          const container = document.getElementById("pub-list");
          let currentYear = null;

          data.forEach((pub) => {
            if (pub.year !== currentYear) {
              const yearHeader = document.createElement("h3");
              yearHeader.textContent = pub.year;
              yearHeader.className = "text-xl sm:text-2xl font-semibold mt-2 sm:mt-4 pt-4 sm:pt-8";
              container.appendChild(yearHeader);
              currentYear = pub.year;
            }

            const item = document.createElement("div");
            item.className = "bg-white px-3 sm:px-4 py-2 sm:py-3 rounded-lg shadow";

            const title = document.createElement("div");
            title.className = "font-semibold text-sm sm:text-lg sm:mb-1";
            title.textContent = pub.title;

            const authors = document.createElement("div");
            authors.className = "text-sm sm:text-base text-gray-700 sm:mb-1";
            
            // Create authors list with lab member highlighting
            const authorElements = pub.authors.map((author, index) => {
              const isLabMember = pub.is_lab_member && pub.is_lab_member[index];
              if (isLabMember) {
                return `<span class="underline font-semibold">${author}</span>`;
              } else {
                return author;
              }
            });
            
            authors.innerHTML = authorElements.join(", ");

            const venue = document.createElement("div");
            venue.className =
              "text-xs sm:text-sm italic text-gray-500 inline-block font-semibold mr-2";
            venue.textContent = pub.venue;

            const links = document.createElement("span");
            links.className = "text-xs sm:text-sm inline-block";
            
            // Create array of link elements
            const linkElements = [];
            for (const [label, href] of Object.entries(pub.links)) {
              if (href) {
                const a = document.createElement("a");
                a.href = href;
                a.className = "text-blue-600 hover:underline";
                a.target = "_blank";
                a.textContent = label;
                linkElements.push(a);
              }
            }
            
            // Wrap links in brackets with commas
            if (linkElements.length > 0) {
              links.appendChild(document.createTextNode("["));
              linkElements.forEach((link, index) => {
                links.appendChild(link);
                if (index < linkElements.length - 1) {
                  links.appendChild(document.createTextNode(", "));
                }
              });
              links.appendChild(document.createTextNode("]"));
            }

            const venueLinksWrapper = document.createElement("div");
            venueLinksWrapper.appendChild(venue);
            venueLinksWrapper.appendChild(links);

            item.appendChild(title);
            item.appendChild(authors);
            item.appendChild(venueLinksWrapper);
            container.appendChild(item);
          });
        });
    </script>
  </body>
</html>
